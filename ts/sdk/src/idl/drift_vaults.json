{
	"version": "0.1.0",
	"name": "drift_vaults",
	"instructions": [
		{
			"name": "initializeVault",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "tokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftSpotMarket",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketMint",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "payer",
					"isMut": true,
					"isSigner": true
				},
				{
					"name": "rent",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "systemProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "params",
					"type": {
						"defined": "VaultParams"
					}
				}
			]
		},
		{
			"name": "updateDelegate",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "delegate",
					"type": "publicKey"
				}
			]
		},
		{
			"name": "updateVault",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				}
			],
			"args": [
				{
					"name": "params",
					"type": {
						"defined": "UpdateVaultParams"
					}
				}
			]
		},
		{
			"name": "initializeVaultDepositor",
			"accounts": [
				{
					"name": "vault",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "payer",
					"isMut": true,
					"isSigner": true
				},
				{
					"name": "rent",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "systemProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "deposit",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "vaultTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketVault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "userTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "amount",
					"type": "u64"
				}
			]
		},
		{
			"name": "requestWithdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "withdrawAmount",
					"type": "u64"
				},
				{
					"name": "withdrawUnit",
					"type": {
						"defined": "WithdrawUnit"
					}
				}
			]
		},
		{
			"name": "cancelRequestWithdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "withdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "vaultTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketVault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftSigner",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "userTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "liquidate",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "resetDelegate",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "authority",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "managerDeposit",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "vaultTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketVault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "userTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "amount",
					"type": "u64"
				}
			]
		},
		{
			"name": "managerRequestWithdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": [
				{
					"name": "withdrawAmount",
					"type": "u64"
				},
				{
					"name": "withdrawUnit",
					"type": {
						"defined": "WithdrawUnit"
					}
				}
			]
		},
		{
			"name": "mangerCancelWithdrawRequest",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "managerWithdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "vaultTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketVault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftSigner",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "userTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "applyProfitShare",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSigner",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		},
		{
			"name": "forceWithdraw",
			"accounts": [
				{
					"name": "vault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "manager",
					"isMut": false,
					"isSigner": true
				},
				{
					"name": "vaultDepositor",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "vaultTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUserStats",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftUser",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftState",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "driftSpotMarketVault",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftSigner",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "userTokenAccount",
					"isMut": true,
					"isSigner": false
				},
				{
					"name": "driftProgram",
					"isMut": false,
					"isSigner": false
				},
				{
					"name": "tokenProgram",
					"isMut": false,
					"isSigner": false
				}
			],
			"args": []
		}
	],
	"accounts": [
		{
			"name": "VaultDepositor",
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "vault",
						"type": "publicKey"
					},
					{
						"name": "pubkey",
						"type": "publicKey"
					},
					{
						"name": "authority",
						"type": "publicKey"
					},
					{
						"name": "vaultShares",
						"type": "u128"
					},
					{
						"name": "lastWithdrawRequest",
						"docs": ["last withdraw request"],
						"type": {
							"defined": "WithdrawRequest"
						}
					},
					{
						"name": "lastValidTs",
						"type": "i64"
					},
					{
						"name": "netDeposits",
						"type": "i64"
					},
					{
						"name": "totalDeposits",
						"type": "u64"
					},
					{
						"name": "totalWithdraws",
						"type": "u64"
					},
					{
						"name": "cumulativeProfitShareAmount",
						"type": "i64"
					},
					{
						"name": "vaultSharesBase",
						"type": "u32"
					},
					{
						"name": "profitShareFeePaid",
						"type": "u64"
					},
					{
						"name": "padding",
						"type": {
							"array": ["u8", 24]
						}
					}
				]
			}
		},
		{
			"name": "Vault",
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "name",
						"type": {
							"array": ["u8", 32]
						}
					},
					{
						"name": "pubkey",
						"type": "publicKey"
					},
					{
						"name": "manager",
						"type": "publicKey"
					},
					{
						"name": "tokenAccount",
						"type": "publicKey"
					},
					{
						"name": "userStats",
						"type": "publicKey"
					},
					{
						"name": "user",
						"type": "publicKey"
					},
					{
						"name": "delegate",
						"type": "publicKey"
					},
					{
						"name": "liquidationDelegate",
						"type": "publicKey"
					},
					{
						"name": "userShares",
						"type": "u128"
					},
					{
						"name": "totalShares",
						"type": "u128"
					},
					{
						"name": "lastFeeUpdateTs",
						"type": "i64"
					},
					{
						"name": "liquidationStartTs",
						"type": "i64"
					},
					{
						"name": "redeemPeriod",
						"type": "i64"
					},
					{
						"name": "totalWithdrawRequested",
						"type": "u64"
					},
					{
						"name": "maxTokens",
						"type": "u64"
					},
					{
						"name": "sharesBase",
						"type": "u32"
					},
					{
						"name": "padding",
						"type": {
							"array": ["u8", 4]
						}
					},
					{
						"name": "managementFee",
						"type": "i64"
					},
					{
						"name": "initTs",
						"type": "i64"
					},
					{
						"name": "netDeposits",
						"type": "i64"
					},
					{
						"name": "managerNetDeposits",
						"type": "i64"
					},
					{
						"name": "totalDeposits",
						"type": "u64"
					},
					{
						"name": "totalWithdraws",
						"type": "u64"
					},
					{
						"name": "managerTotalDeposits",
						"type": "u64"
					},
					{
						"name": "managerTotalWithdraws",
						"type": "u64"
					},
					{
						"name": "managerTotalFee",
						"type": "i64"
					},
					{
						"name": "managerTotalProfitShare",
						"type": "u64"
					},
					{
						"name": "minDepositAmount",
						"docs": ["the minimum deposit amount"],
						"type": "u64"
					},
					{
						"name": "profitShare",
						"type": "u32"
					},
					{
						"name": "hurdleRate",
						"type": "u32"
					},
					{
						"name": "spotMarketIndex",
						"type": "u16"
					},
					{
						"name": "bump",
						"type": "u8"
					},
					{
						"name": "permissioned",
						"type": "bool"
					},
					{
						"name": "lastManagerWithdrawRequest",
						"type": {
							"defined": "WithdrawRequest"
						}
					}
				]
			}
		}
	],
	"types": [
		{
			"name": "VaultParams",
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "name",
						"type": {
							"array": ["u8", 32]
						}
					},
					{
						"name": "redeemPeriod",
						"type": "i64"
					},
					{
						"name": "maxTokens",
						"type": "u64"
					},
					{
						"name": "managementFee",
						"type": "i64"
					},
					{
						"name": "minDepositAmount",
						"type": "u64"
					},
					{
						"name": "profitShare",
						"type": "u32"
					},
					{
						"name": "hurdleRate",
						"type": "u32"
					},
					{
						"name": "spotMarketIndex",
						"type": "u16"
					},
					{
						"name": "permissioned",
						"type": "bool"
					}
				]
			}
		},
		{
			"name": "UpdateVaultParams",
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "redeemPeriod",
						"type": {
							"option": "i64"
						}
					},
					{
						"name": "maxTokens",
						"type": {
							"option": "u64"
						}
					},
					{
						"name": "managementFee",
						"type": {
							"option": "i64"
						}
					},
					{
						"name": "minDepositAmount",
						"type": {
							"option": "u64"
						}
					},
					{
						"name": "profitShare",
						"type": {
							"option": "u32"
						}
					},
					{
						"name": "hurdleRate",
						"type": {
							"option": "u32"
						}
					},
					{
						"name": "permissioned",
						"type": {
							"option": "bool"
						}
					}
				]
			}
		},
		{
			"name": "WithdrawRequest",
			"type": {
				"kind": "struct",
				"fields": [
					{
						"name": "shares",
						"docs": ["request shares of vault withdraw"],
						"type": "u128"
					},
					{
						"name": "value",
						"docs": [
							"requested value (in vault spot_market_index) of shares for withdraw"
						],
						"type": "u64"
					},
					{
						"name": "ts",
						"docs": ["request ts of vault withdraw"],
						"type": "i64"
					}
				]
			}
		},
		{
			"name": "VaultDepositorAction",
			"type": {
				"kind": "enum",
				"variants": [
					{
						"name": "Deposit"
					},
					{
						"name": "WithdrawRequest"
					},
					{
						"name": "CancelWithdrawRequest"
					},
					{
						"name": "Withdraw"
					},
					{
						"name": "FeePayment"
					}
				]
			}
		},
		{
			"name": "WithdrawUnit",
			"type": {
				"kind": "enum",
				"variants": [
					{
						"name": "Shares"
					},
					{
						"name": "Token"
					},
					{
						"name": "SharesPercent"
					}
				]
			}
		}
	],
	"events": [
		{
			"name": "VaultRecord",
			"fields": [
				{
					"name": "ts",
					"type": "i64",
					"index": false
				},
				{
					"name": "spotMarketIndex",
					"type": "u16",
					"index": false
				},
				{
					"name": "vaultEquityBefore",
					"type": "u64",
					"index": false
				}
			]
		},
		{
			"name": "VaultDepositorRecord",
			"fields": [
				{
					"name": "ts",
					"type": "i64",
					"index": false
				},
				{
					"name": "vault",
					"type": "publicKey",
					"index": false
				},
				{
					"name": "depositorAuthority",
					"type": "publicKey",
					"index": false
				},
				{
					"name": "action",
					"type": {
						"defined": "VaultDepositorAction"
					},
					"index": false
				},
				{
					"name": "amount",
					"type": "u64",
					"index": false
				},
				{
					"name": "spotMarketIndex",
					"type": "u16",
					"index": false
				},
				{
					"name": "vaultSharesBefore",
					"type": "u128",
					"index": false
				},
				{
					"name": "vaultSharesAfter",
					"type": "u128",
					"index": false
				},
				{
					"name": "vaultEquityBefore",
					"type": "u64",
					"index": false
				},
				{
					"name": "userVaultSharesBefore",
					"type": "u128",
					"index": false
				},
				{
					"name": "totalVaultSharesBefore",
					"type": "u128",
					"index": false
				},
				{
					"name": "userVaultSharesAfter",
					"type": "u128",
					"index": false
				},
				{
					"name": "totalVaultSharesAfter",
					"type": "u128",
					"index": false
				},
				{
					"name": "profitShare",
					"type": "u64",
					"index": false
				},
				{
					"name": "managementFee",
					"type": "i64",
					"index": false
				},
				{
					"name": "managementFeeShares",
					"type": "i64",
					"index": false
				}
			]
		}
	],
	"errors": [
		{
			"code": 6000,
			"name": "Default",
			"msg": "Default"
		},
		{
			"code": 6001,
			"name": "InvalidVaultRebase",
			"msg": "InvalidVaultRebase"
		},
		{
			"code": 6002,
			"name": "InvalidVaultSharesDetected",
			"msg": "InvalidVaultSharesDetected"
		},
		{
			"code": 6003,
			"name": "CannotWithdrawBeforeRedeemPeriodEnd",
			"msg": "CannotWithdrawBeforeRedeemPeriodEnd"
		},
		{
			"code": 6004,
			"name": "InvalidVaultWithdraw",
			"msg": "InvalidVaultWithdraw"
		},
		{
			"code": 6005,
			"name": "InsufficientVaultShares",
			"msg": "InsufficientVaultShares"
		},
		{
			"code": 6006,
			"name": "InvalidVaultWithdrawSize",
			"msg": "InvalidVaultWithdrawSize"
		},
		{
			"code": 6007,
			"name": "InvalidVaultForNewDepositors",
			"msg": "InvalidVaultForNewDepositors"
		},
		{
			"code": 6008,
			"name": "VaultWithdrawRequestInProgress",
			"msg": "VaultWithdrawRequestInProgress"
		},
		{
			"code": 6009,
			"name": "VaultIsAtCapacity",
			"msg": "VaultIsAtCapacity"
		},
		{
			"code": 6010,
			"name": "InvalidVaultDepositorInitialization",
			"msg": "InvalidVaultDepositorInitialization"
		},
		{
			"code": 6011,
			"name": "DelegateNotAvailableForLiquidation",
			"msg": "DelegateNotAvailableForLiquidation"
		},
		{
			"code": 6012,
			"name": "InvalidEquityValue",
			"msg": "InvalidEquityValue"
		},
		{
			"code": 6013,
			"name": "VaultInLiquidation",
			"msg": "VaultInLiquidation"
		},
		{
			"code": 6014,
			"name": "DriftError",
			"msg": "DriftError"
		},
		{
			"code": 6015,
			"name": "InvalidVaultInitialization",
			"msg": "InvalidVaultInitialization"
		},
		{
			"code": 6016,
			"name": "InvalidVaultUpdate",
			"msg": "InvalidVaultUpdate"
		},
		{
			"code": 6017,
			"name": "PermissionedVault",
			"msg": "PermissionedVault"
		},
		{
			"code": 6018,
			"name": "WithdrawInProgress",
			"msg": "WithdrawInProgress"
		},
		{
			"code": 6019,
			"name": "SharesPercentTooLarge",
			"msg": "SharesPercentTooLarge"
		},
		{
			"code": 6020,
			"name": "InvalidVaultDeposit",
			"msg": "InvalidVaultDeposit"
		}
	]
}
